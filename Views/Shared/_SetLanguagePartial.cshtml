@using Microsoft.AspNetCore.Builder
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options

@model CultureViewModel

@inject IOptions<RequestLocalizationOptions> LocalizationOptions

@{
    List<string>? cultureItems = LocalizationOptions.Value.SupportedCultures
    .Select(c => c.Name)
    .ToList();
}

<div class="language-dropdown-container">
    <div class="dropdown">
        <div class="dropdown-title">
            <div class="dropdown-title">EN</div>
            <div class="dropdown-icon">
                <span class="fa fa-sort-desc" aria-hidden="true"></span>
            </div>
        </div>
        <div class="dropdown-menu">
            <form asp-action="SetLanguage" method="post" asp-route-returnurl="@Context.Request.Path">
                @for (int i = 0; i < cultureItems.Count(); ++i)
                {
                    <div class="dropdown-choice">
                        <button value="@cultureItems[i]" onclick="document.querySelector('#culture-input').setAttribute('value', this.getAttribute('value'));" type="submit">@cultureItems[i]</button>
                    </div>
                }
                <input type="hidden" id="culture-input" asp-for="@Model.Culture">
            </form>
        </div>
    </div>
</div>


